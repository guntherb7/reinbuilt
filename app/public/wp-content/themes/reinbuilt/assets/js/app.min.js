document.addEventListener("DOMContentLoaded",function(event){gsap.registerPlugin(Observer);let sections=document.querySelectorAll("section"),images=document.querySelectorAll(".bg"),outerWrappers=gsap.utils.toArray(".outer"),innerWrappers=gsap.utils.toArray(".inner"),hold=gsap.utils.toArray(".hold"),currentIndex=-1,wrap=gsap.utils.wrap(0,sections.length),animating;function gotoSection(index,direction){index=wrap(index),animating=!0;let fromTop=-1===direction,dFactor=fromTop?-1:1,tl=gsap.timeline({defaults:{duration:.5,ease:"sine.inOut"},onComplete:()=>animating=!1});0<=currentIndex&&(gsap.set(sections[currentIndex],{zIndex:1}),tl.to(images[currentIndex],{yPercent:0*dFactor}).set(sections[currentIndex],{autoAlpha:0}),5==index||6==index?(document.querySelector(".hold").style.opacity="1",document.querySelector(".hold").style.visibility="visible"):(document.querySelector(".hold").style.opacity="0",document.querySelector(".hold").style.visibility="hidden")),gsap.set(sections[index],{autoAlpha:1}),tl.fromTo([outerWrappers[index],innerWrappers[index]],{yPercent:i=>i?-100*dFactor:100*dFactor},{yPercent:0},0).fromTo(images[index],{yPercent:15*dFactor},{yPercent:0},0),currentIndex=index,console.log(currentIndex),console.log(sections[currentIndex].classList)}gsap.set(outerWrappers,{yPercent:100}),gsap.set(innerWrappers,{yPercent:-100}),gsap.set(hold,{yPercent:0}),Observer.create({type:"wheel,touch,pointer",wheelSpeed:-1,onDown:()=>!animating&&gotoSection(currentIndex-1,-1),onUp:()=>!animating&&gotoSection(currentIndex+1,1),tolerance:10,preventDefault:!0}),gotoSection(0,1)});